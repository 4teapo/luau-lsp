# Roblox API Types Generation

The `globalTypes.d.luau` file provides an autogenerated types definition file. This file is generated by `dumpRobloxTypes.py`:

```
$ python dumpRobloxTypes.py > globalTypes.d.luau
```

The script extracts type information from the Roblox API Dump:

- https://raw.githubusercontent.com/CloneTrooper1019/Roblox-Client-Tracker/roblox/API-Dump.json

BrickColor information is retrieved from:

- https://gist.githubusercontent.com/Anaminus/49ac255a68e7a7bc3cdd72b602d5071f/raw/f1534dcae312dbfda716b7677f8ac338b565afc3/BrickColor.json

The API dump is missing some information, such as DataTypes. This is stored independently in `DataTypes.json`.

A legacy set of corrections is also present in `Corrections.json`. But note that future corrections are typically
written in the script directly.

## Contributing

There are often times when the information provided in the following dump information is either incorrect or too generic
to provide useful intellisense. Pull requests to fix these definitions are welcome.

Inside `dumpRobloxTypes.py`, there is a variable `EXTRA_MEMBERS` that is used for submitting corrections. It is a
dictionary of class name to a list of strings in definitions syntax format that are added to classes.
Add a member definition here if you wish to overwrite an autogenerated definition or add a missing definition.

If types are not present at all in the autogenerated information, you can hardcode its definition. Modify one of three
strings to add your type to the file:

- `START_BASE`: types that go before anything else is defined
- `POST_DATATYPES_BASE`: types that go after the Data Types have been defined
- `END_BASE`: types that go after all autogenerated types have been defined

The relevant string to add it to depends on whether the type relies on other types. For simplicity, it is often best to
add it to `END_BASE`. However, please do not add a hardcoded definition unless it is absolutely necessary.

In summary, to submit corrections, follow the following steps:

1. Checkout the repository
2. Edit `EXTRA_MEMBERS` in `dumpRobloxTypes.py` with your fixes
3. Run `python dumpRobloxTypes.py > globalTypes.d.luau`
4. Commit and submit a Pull Request

## Serving

Due to GitHub strict ratelimits for unauthenticated requests, the type definition files and API documentation are available
to access statically via a Cloudflare Pages deployment:

- `https://luau-lsp.pages.dev/type-definitions/globalTypes.None.d.luau`
- `https://luau-lsp.pages.dev/type-definitions/globalTypes.PluginSecurity.d.luau`
- `https://luau-lsp.pages.dev/type-definitions/globalTypes.LocalUserSecurity.d.luau`
- `https://luau-lsp.pages.dev/type-definitions/globalTypes.RobloxScriptSecurity.d.luau`
- `https://luau-lsp.pages.dev/api-docs/en-us.json`
